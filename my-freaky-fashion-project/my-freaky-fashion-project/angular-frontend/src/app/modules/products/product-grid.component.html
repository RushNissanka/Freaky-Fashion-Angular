<!-- üì¶ Product Grid Component Template -->
<div class="product-grid">
  <!-- ‚è≥ Loading / ‚ö† Error States -->
  <div *ngIf="loading">‚è≥ Loading products...</div>
  <div *ngIf="error">‚ö† {{ error }}</div>

  <!-- üì¶ Product Cards -->
  <div
    *ngFor="let product of filteredProducts; trackBy: trackByProductId"
    class="product-card"
  >
    <!-- üëá Product Info Clickable Link -->
    <a [routerLink]="['/products', product.slug]" class="product-link">
      <!-- üñº Image Wrapper -->
      <div class="image-wrapper">
        <img
          class="main-img"
          *ngIf="product.imageUrl"
          [src]="transformUrl(product.imageUrl)"
          [alt]="product.name"
        />
        <div class="no-image" *ngIf="!product.imageUrl">üñº No image</div>

        <img
          class="hover-img"
          *ngIf="product.imageUrl2"
          [src]="transformUrl(product.imageUrl2)"
          [alt]="product.name + ' alt2'"
        />
      </div>

      <!-- üìù Product Text -->
      <h2>{{ product.name }}</h2>
      <p>{{ product.price }} SEK</p>
    </a>

    <!-- üõí Add to Cart Button -->
    <button
      (click)="handleAddToCart(product); $event.stopPropagation()"
      [ngClass]="{ 'add-to-cart-btn': true, 'added': justAdded[product.id] }"
    >
      <ng-container *ngIf="justAdded[product.id]; else notAdded">
        <span class="checkmark">‚úî</span> Tillagd i kundvagn
      </ng-container>
      <ng-template #notAdded>
        L√§gg i varukorg
      </ng-template>
    </button>
  </div>
</div>
